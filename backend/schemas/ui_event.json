{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["type", "ts", "session_id", "payload"],
  "properties": {
    "type": { "type": "string", "enum": ["ui_review_expand", "ui_review_collapse"] },
    "ts":   { "type": "string", "format": "date-time" },
    "session_id": { "type": "string", "minLength": 1, "maxLength": 128 },
    "payload": {
      "type": "object",
      "additionalProperties": false,
      "required": ["account_id", "bureau"],
      "properties": {
        "account_id": { "type": "string", "minLength": 1, "maxLength": 128 },
        "bureau":     { "type": "string", "minLength": 2, "maxLength": 32 },
        "decision_source": { "type": "string", "enum": ["ai", "rules"] },
        "tier": { "type": "string", "enum": ["Tier1","Tier2","Tier3","Tier4","none"] }
      }
    }
  }
}
